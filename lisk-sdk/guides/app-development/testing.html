<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Testing the application - Lisk  SDK  Docs</title>
    <link rel="canonical" href="https://lisk.com/documentation/lisk-sdk/guides/app-development/testing.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/site-extra.css">
      <link rel="stylesheet" href="../../../_/css/vendor/docsearch.min.css">
      <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css -->
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script src="../../../_/js/vendor/medium-zoom.min.js"></script>
<link rel="icon" href="../../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<script data-cookieconsent="ignore" type="text/javascript" id="GTM">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({"gtm.start":
          new Date().getTime(),event:"gtm.js"});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!="dataLayer"?"&amp;l="+l:"";j.async=true;
  j.crossOrigin="anonymous";j.src=
          "https://www.googletagmanager.com/gtm.js?id="+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,"script","dataLayer","GTM-NKNKGHL");</script>

<script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
<header class="header">
  <nav class="navbar">
      <div class="navbar-content">
        <div class="navbar-brand">
          <a href="https://lisk.io" title="Lisk.io" class="lisk-logo"></a>
            <span  class="nav-brand__name-area">
              <strong class="nav-brand__name-area__title">SDK</strong>
                        </span>
          <div class="top-versions page-versions">
  <button class="version-menu-toggle top-version-menu-toggle" title="Show other versions of page">5.1.4 (latest)</button>
  <div class="version-menu">
    <a class="version is-current" href="testing.html">5.1.4 (latest)</a>
    <a class="version is-missing" href="../../v4/index.html">4.0.0</a>
    <a class="version is-missing" href="../../v3/index.html">3.0.2</a>
    <a class="version is-missing" href="../../v2/index.html">2.3.9</a>
  </div>
</div>
          <button class="navbar-burger" data-target="topbar-nav">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
          <div class="navbar-end">
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="">Documentations</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" href="https://lisk.com/documentation/lisk-sdk/">Lisk SDK</a>
                <a class="navbar-item" href="https://lisk.com/documentation/lisk-service/">Lisk Service</a>
                <a class="navbar-item" href="https://lisk.com/documentation/lisk-core/">Lisk Core</a>
              </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="">Resources</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" href=""><strong>Lisk Service API</strong></a>
                <a class="navbar-item" href="https://lisk.com/documentation/lisk-service/references/api.html">Mainnet</a>
                <a class="navbar-item" href="https://lisk.com/documentation/lisk-service/references/api-testnet.html">Testnet</a>
                <hr class="navbar-divider">
                <a class="navbar-item" href=""><strong>Lisk Network Explorer</strong></a>
                <a class="navbar-item" target="_blank" href="https://lisk.observer/">Lisk Observer<i class="icofont-external-link"></i></a>
                <a class="navbar-item" target="_blank" href="https://liskscan.io/">LISKscan<i class="icofont-external-link"></i></a>
              </div>
            </div>
          </div>
            <div class="navbar-menu search-box hide-for-print">
              <input id="search-input" type="text" placeholder="Search">
            </div>
        </div>
        <div class="navbar-item navbar-right">
<!--
          <a href="https://lisk.chat" title="Lisk Chat" target="_blank" class="footer__icon icon-discord-2x"></a>
-->
          <a href="https://github.com/LiskHQ" title="Lisk GitHub" target="_blank" class="footer__icon icon-github-2x"></a>
          <span class="control">
            <a class="button is-primary" target="_blank" title="Lisk Dev Forum" href="https://dev.lisk.io/">Get help</a>
          </span>
        </div>
      </div>
  </nav>
</header>
<div class="body-container">
  <div class="body">
<div class="nav-container" data-component="lisk-sdk" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Lisk SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../index.html">What is the Lisk SDK?</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../quickstart.html">Quickstart</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../architecture/index.html">Architectural overview</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../architecture/on-chain-architecture.html">On-chain architecture</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../architecture/off-chain-architecture.html">Off-chain architecture</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../architecture/communication-architecture.html">Communication Architecture</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Development guides</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="setup.html">Creating a new blockchain application</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="module.html">Creating a new module</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="asset.html">Creating a new transaction asset</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="plugin.html">Creating a new plugin</a>
  </li>
  <li class="nav-item is-current-page single-page" data-depth="2">
    <a class="nav-link" href="testing.html">Testing the application</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="genesis-block.html">Generating a genesis block</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="configuration.html">Configuring a blockchain application</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="frontend.html">Communicating with a frontend</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Management guides</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../node-management/signing-transactions-offline.html">Creating transactions and signing them offline</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../node-management/non-forging-node-protection.html">Protecting a non-forging node</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../node-management/forging-node-protection.html">Protecting a forging node</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../node-management/forging.html">Enabling forging</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../node-management/logging.html">Managing logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tutorials</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../tutorials/index.html">Tutorials overview</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../tutorials/hello-world.html">Hello World</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../tutorials/nft.html">Non-fungible token (NFT)</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../tutorials/srs.html">Social Recovery System (SRS)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../references/schemas.html">Schemas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Commander</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-commander/index.html">What is Lisk Commander?</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-commander/commands.html">Commands</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-commander/sensitive-inputs.html">Sensitive inputs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Elements</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/index.html">What is Lisk Elements?</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/api-client.html">API client</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/bft.html">BFT</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/chain.html">Chain</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/client.html">Client</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/codec.html">Codec</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/cryptography.html">Cryptography</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/db.html">DB</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/genesis.html">Genesis</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/p2p.html">P2P</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/passphrase.html">Passphrase</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/transaction-pool.html">Transaction pool</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/transactions.html">Transactions</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/tree.html">Tree</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/utils.html">Utils</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/validator.html">Validator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Framework</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-framework/index.html">Framework interfaces</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../references/lisk-framework/test-suite.html">The Lisk SDK test suite</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../../rpc-endpoints.html">RPC endpoints</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SDK modules</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../../token-module.html">Token module</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../../sequence-module.html">Sequence module</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../../keys-module.html">Keys module</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../../dpos-module.html">DPoS module</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SDK plugins</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../../references/lisk-framework/http-api-plugin.html">HTTP API plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../../references/lisk-framework/dashboard-plugin.html">Dashboard plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../../references/lisk-framework/faucet-plugin.html">Faucet plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../../references/lisk-framework/forger-plugin.html">Forger plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../../references/lisk-framework/report-misbehavior-plugin.html">Report misbehavior plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../../references/lisk-framework/monitor-plugin.html">Monitor plugin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item single-page" data-depth="1">
    <a class="nav-link" href="../../glossary.html">Glossary and Abbreviations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk protocol</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../protocol/index.html">What is the Lisk protocol?</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../protocol/accounts.html">Accounts</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../protocol/transactions.html">Transactions</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../protocol/blocks.html">Blocks</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../protocol/consensus-algorithm.html">Consensus algorithm</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../protocol/network.html">Network</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../../protocol/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk SDK</span>
    <span class="version">5.1.4 (latest)</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Lisk Core</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-core/index.html">3.0.0</a>
        </li>
        <li class="version">
          <a href="../../../lisk-core/v2/index.html">2.1.7</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Lisk SDK</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">5.1.4 (latest)</a>
        </li>
        <li class="version">
          <a href="../../v4/index.html">4.0.0</a>
        </li>
        <li class="version">
          <a href="../../v3/index.html">3.0.2</a>
        </li>
        <li class="version">
          <a href="../../v2/index.html">2.3.9</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Lisk Service</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-service/index.html">0.4.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-service/v0.3/index.html">0.3.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" title="Home" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Lisk SDK</a></li>
    <li>Development guides</li>
    <li><a href="testing.html">Testing the application</a></li>
  </ul>
</nav>
  <div class="page-versions toolbar-versions">
  <button class="version-menu-toggle" title="Show other versions of page">5.1.4 (latest)</button>
  <div class="version-menu">
    <a class="version is-current" href="testing.html">5.1.4 (latest)</a>
    <a class="version is-missing" href="../../v4/index.html">4.0.0</a>
    <a class="version is-missing" href="../../v3/index.html">3.0.2</a>
    <a class="version is-missing" href="../../v2/index.html">2.3.9</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/docs-sdk/modules/ROOT/pages/guides/app-development/testing.adoc"><i class="icofont-ui-edit"></i>Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Testing the application</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>How to use the test utility of the Lisk SDK to test your application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Prerequisites</div>
<div class="paragraph">
<p>To use this guide, it is assumed that the following criteria have been met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lisk Commander is installed, and a basic blockchain application is already initialized, as explained in the guide <a href="setup.html" class="page">Creating a new blockchain application</a>.</p>
</li>
<li>
<p>a new module has been generated as described in the guide <a href="module.html" class="page">Creating a new module</a>.</p>
</li>
<li>
<p>a new asset has been generated as described in the guide <a href="asset.html" class="page">Creating a new transaction asset</a>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To conveniently test the functionality of modules, plugins, or assets, adjust the already generated test skeletons in the <code>test</code> folder of your application.</p>
</div>
<div class="paragraph">
<p>After generating a new module and asset, the corresponding skeletons for their unit tests can be found under <code>test/unit/modules/nft</code>:</p>
</div>
<div class="listingblock">
<div class="title">/new_app/test/</div>
<div class="content">
<pre>├── _setup.js
├── commands
│   └── account
│       └── create.spec.ts
├── integration
├── network
├── tsconfig.json
├── unit
│   └── modules
│       └── nft
│           ├── assets
│           │   └── create_n_f_t_asset.spec.ts
│           └── nft_module.spec.ts
└── utils
    └── config.ts</pre>
</div>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#running-the-test-suite">Running the test suite</a></li>
<li><a href="#the-module-test-skeleton">The module test skeleton</a></li>
<li><a href="#the-asset-test-skeleton">The asset test skeleton</a></li>
<li><a href="#example-unit-tests-for-a-transaction-asset">Example: Unit tests for a transaction asset</a>
<ul class="sectlevel2">
<li><a href="#imports">Imports</a></li>
<li><a href="#testing-the-validate-function">Testing the validate() function</a></li>
<li><a href="#testing-the-apply-function">Testing the apply() function</a></li>
<li><a href="#run-the-tests">Run the tests</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="running-the-test-suite"><a class="anchor" href="#running-the-test-suite"></a>Running the test suite</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is already possible to run the test at this point, though only the most basic tests will be implemented.</p>
</div>
<div class="paragraph">
<p>To run all test suites, execute:</p>
</div>
<div class="listingblock">
<div class="title">/new_app/</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yarn run test</code></pre>
</div>
</div>
<div class="paragraph">
<p>The test results can then be viewed in the console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>yarn run v1.22.10
$ jest --passWithNoTests
 PASS  test/unit/plugins/nft_api/nft_api_plugin.spec.ts (7.656 s)
 PASS  test/unit/modules/my_module/my_module_module.spec.ts (7.726 s)
 PASS  test/unit/modules/nft/nft_module.spec.ts (7.703 s)
 PASS  test/unit/modules/nft/assets/create_n_f_t_asset.spec.ts (9.282 s)
 PASS  test/commands/account/create.spec.ts (10.092 s)

Test Suites: 5 passed, 5 total
Tests:       26 todo, 8 passed, 34 total
Snapshots:   1 passed, 1 total
Time:        11.388 s
Ran all test suites.
✨  Done in 14.60s.</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the tests of the asset fails, e.g. with the following error:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>'asset' is declared but its value is never read.</pre>
</div>
</div>
<div class="paragraph">
<p>It is most likely, because the <a href="#{}">validate()</a> or <a href="#{}">apply()</a> function isn&#8217;t implemented yet.
To fix the error, either remove the unused variables or implement logic which uses them in the corresponding function.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-module-test-skeleton"><a class="anchor" href="#the-module-test-skeleton"></a>The module test skeleton</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The test skeleton of a module doesn&#8217;t contain any real tests in the beginning.</p>
</div>
<div class="paragraph">
<p>Use the existing structure to implement the tests required for the module, and add more tests as needed.</p>
</div>
<div class="listingblock">
<div class="title">test/unit/modules/nft/nft_module.spec.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">// import * as modules from '../../../src/app/modules/nft'

describe('NftModuleModule', () =&gt; {
	describe('constructor', () =&gt; {
		it.todo('should have valid id');
		it.todo('should have valid name');
	});

	describe('beforeBlockApply', () =&gt; {
		it.todo('should execute before block apply');
	});
	describe('afterBlockApply', () =&gt; {
		it.todo('should execute after block apply');
	});
	describe('beforeTransactionApply', () =&gt; {
		it.todo('should execute before transaction apply');
	});
	describe('afterTransactionApply', () =&gt; {
		it.todo('should execute after transaction apply');
	});
	describe('afterGenesisBlockApply', () =&gt; {
		it.todo('should execute after genesis apply');
	});
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-asset-test-skeleton"><a class="anchor" href="#the-asset-test-skeleton"></a>The asset test skeleton</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The test skeleton for the asset already contains already a few simple tests right from the beginning.
They were automatically created during the <a href="asset.html" class="page">generation of the asset</a>.
The remainder of the tests will need to be created by the developer, to test all the custom logic of the asset which was implemented after the initialization of the application.</p>
</div>
<div class="listingblock">
<div class="title">test/unit/modules/nft/create_n_f_t_asset.spec.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { CreateNFTAsset } from '../../../../../src/app/modules/nft/assets/create_n_f_t_asset';

describe('CreateNFTAsset', () =&gt; {
  let transactionAsset: CreateNFTAsset;

	beforeEach(() =&gt; {
		transactionAsset = new CreateNFTAsset();
	});

	describe('constructor', () =&gt; {
		it('should have valid id', () =&gt; {
			expect(transactionAsset.id).toEqual(0);
		});

		it('should have valid name', () =&gt; {
			expect(transactionAsset.name).toEqual('createNFT');
		});

		it('should have valid schema', () =&gt; {
			expect(transactionAsset.schema).toMatchSnapshot();
		});
	});

	describe('validate', () =&gt; {
		describe('schema validation', () =&gt; {
            it.todo('should throw errors for invalid schema');
            it.todo('should be ok for valid schema');
        });
	});

	describe('apply', () =&gt; {
        describe('valid cases', () =&gt; {
            it.todo('should update the state store');
        });

        describe('invalid cases', () =&gt; {
            it.todo('should throw error');
        });
	});
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="example-unit-tests-for-a-transaction-asset"><a class="anchor" href="#example-unit-tests-for-a-transaction-asset"></a>Example: Unit tests for a transaction asset</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This example shows how to write unit tests for the example asset from the previous guide <a href="asset.html" class="page">Creating a new transaction asset</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For more information about the different features of the test suite, check out the reference page <a href="../../references/lisk-framework/test-suite.html" class="page">The Lisk SDK test suite</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="imports"><a class="anchor" href="#imports"></a>Imports</h3>
<div class="paragraph">
<p>Add the following lines at the top of <code>create_n_f_t_asset.spec.ts</code> to import the required resources for the tests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { CreateNFTAsset } from '../../../../../src/app/modules/nft/assets/create_n_f_t_asset'; <i class="conum" data-value="1"></i><b>(1)</b>
import { StateStore, ReducerHandler, testing } from 'lisk-sdk'; <i class="conum" data-value="2"></i><b>(2)</b>
import { NftModule } from '../../../../../src/app/modules/nft/nft_module'; <i class="conum" data-value="3"></i><b>(3)</b>
import {
    getAllNFTTokens,
    createNFTToken,
}  from "../../../../../src/app/modules/nft/nft"; <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>CreateNFTAsset</code>: The asset which is tested here.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>testing</code> contains the functions of the Lisk SDk test suite.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>NftModule</code>: is used in <code>createDefaultAccount()</code> to create a default account with the correct account properties.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>getAllNFTTokens</code> and <code>createNFTToken</code> are utility functions for the NFT module which are also used in the tests for the <code>apply()</code> function.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="testing-the-validate-function"><a class="anchor" href="#testing-the-validate-function"></a>Testing the validate() function</h3>
<div class="paragraph">
<p>As a reminder, the <code>validate()</code> function of the createNFT asset is shown below:</p>
</div>
<div class="listingblock">
<div class="title"><code>validate()</code> function of <code>create_n_f_t_asset.ts</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">validate({asset}) {
    if (asset.name === "Mewtwo") {
        throw new Error("Illegal NFT name: Mewtwo");
    }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>To verify that the function is implemented correctly, write 2 tests to check if the following occurs:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>it throws an error if the NFT name equals "Mewtwo"</p>
</li>
<li>
<p>it does not throw any error for a valid schema</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The function <code>createValidateAssetContext()</code> is used for both tests to create a context for the <code>validate()</code> function.</p>
</div>
<div class="paragraph">
<p>In the first test, where an error is expected, a context with an invalid <code>asset</code> parameter with the <code>name: 'Mewtwo'</code> is created, whereas in the second test a valid <code>name</code> property is passed.</p>
</div>
<div class="paragraph">
<p>After the context is created, both tests will call the <code>validate()</code> function with the context and the result is checked.</p>
</div>
<div class="paragraph">
<p>If all tests pass, it is verified that the validate function behaves exactly as expected.</p>
</div>
<div class="listingblock">
<div class="title">Tests for <code>validate()</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">describe('validate', () =&gt; {
    describe('schema validation', () =&gt; {
        it('should throw error if nft name equals "Mewtwo"', () =&gt; {
            const context = testing.createValidateAssetContext({
                asset: { name: 'Mewtwo', initValue: 1, minPurchaseMargin: 10 },
                transaction: { senderAddress: Buffer.alloc(0) } as any,
            });

            expect(() =&gt; transactionAsset.validate(context)).toThrow(
                'Illegal NFT name: Mewtwo',
            );
        });
        it('should be ok for valid schema', () =&gt; {
            const context = testing.createValidateAssetContext({
                asset: { name: 'Squirtle', initValue: 1, minPurchaseMargin: 10 },
                transaction: { senderAddress: Buffer.alloc(0) } as any,
            });

            expect(() =&gt; transactionAsset.validate(context)).not.toThrow();
        });
    });
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="testing-the-apply-function"><a class="anchor" href="#testing-the-apply-function"></a>Testing the apply() function</h3>
<div class="paragraph">
<p>As a reminder, the <code>apply()</code> function of the createNFT asset is shown below:</p>
</div>
<div class="listingblock">
<div class="title"><code>apply()</code> function of <code>create_n_f_t_asset.ts</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">async apply({ asset, stateStore, reducerHandler, transaction }) {
    // 4.verify if sender has enough balance
    const senderAddress = transaction.senderAddress;
    const senderAccount = await stateStore.account.get(senderAddress);

    // 5.create nft
    const nftToken = createNFTToken({
      name: asset.name,
      ownerAddress: senderAddress,
      nonce: transaction.nonce,
      value: asset.initValue,
      minPurchaseMargin: asset.minPurchaseMargin,
    });

    // 6.update sender account with unique nft id
    senderAccount.nft.ownNFTs.push(nftToken.id);
    await stateStore.account.set(senderAddress, senderAccount);

    // 7.debit tokens from sender account to create nft
    await reducerHandler.invoke("token:debit", {
      address: senderAddress,
      amount: asset.initValue,
    });

    // 8.save nfts
    const allTokens = await getAllNFTTokens(stateStore);
    allTokens.push(nftToken);
    await setAllNFTTokens(stateStore, allTokens);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To verify that the function is implemented correctly, write 4 tests to check if the following occurs:</p>
</div>
<div class="paragraph">
<p>For valid cases:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>it updates the sender account with a unique NFT ID</p>
</li>
<li>
<p>it debits the initial value from the sender account</p>
</li>
<li>
<p>it saves the new NFT to the database</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For invalid cases:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>it throws an error, if the NFT name is already registered</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Similar to the unit tests for the <code>validate()</code> function, a context is prepared using <code>createApplyAssetContext()</code> for the <code>apply()</code> function which can be passed to the function when calling it in each test.</p>
</div>
<div class="paragraph">
<p>As the context is the same for every test,  it is convenient to prepare everything in the <code>beforeEach()</code> hook and directly call the <code>apply()</code> function with the context in each test.</p>
</div>
<div class="listingblock">
<div class="title">create_n_f_t_asset.spec.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">describe('apply', () =&gt; {
    let stateStore: StateStore;
    let reducerHandler: ReducerHandler;
    let account: any;
    let nftToken;
    let context;

    beforeEach(() =&gt; {

        // Create new account
        account = testing.fixtures.createDefaultAccount&lt;NFTAccountProps&gt;([NftModule]);

        // Create new NFT for account
        nftToken = createNFTToken({
            name: 'Squirtle',
            ownerAddress: account.address,
            nonce: BigInt(1),
            value: BigInt(1),
            minPurchaseMargin: 10
        });

        // Create state store mock with account
        stateStore = new testing.mocks.StateStoreMock({
            accounts: [account],
        });

        // Create reducer handler mock
        reducerHandler = testing.mocks.reducerHandlerMock;

        // Create context for the apply() function
        context = testing.createApplyAssetContext({
            stateStore,
            reducerHandler,
            asset: { name: 'Squirtle', initValue: BigInt(1), minPurchaseMargin: 10 },
            transaction: { senderAddress: account.address, nonce: BigInt(1) } as any,
        });

        // Tracks calls to stateStore.chain and the reducerHandler
        jest.spyOn(stateStore.chain, 'get');
        jest.spyOn(stateStore.chain, 'set');
        jest.spyOn(reducerHandler, 'invoke');
    });

});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, add the following interface to the test file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export interface NFTAccountProps {
    nft: {
        ownNFTs: [];
    };
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is used in the <code>beforeEach()</code> hook to create a default account with valid account properties.</p>
</div>
<div class="sect3">
<h4 id="valid-cases"><a class="anchor" href="#valid-cases"></a>Valid cases</h4>
<div class="paragraph">
<p>The tests for the <code>valid cases</code> test are implemented as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">describe('valid cases', () =&gt; {
    it('should update sender account with unique nft id', async () =&gt; {
        await transactionAsset.apply(context);
        const updatedSender = await stateStore.account.get&lt;NFTAccountProps&gt;(account.address);

        expect(updatedSender.nft.ownNFTs.toString()).toEqual(nftToken.id.toString());
    });
    it('should debit the initial value from the sender account', async () =&gt; {
        await transactionAsset.apply(context);
        expect(reducerHandler.invoke).toHaveBeenCalledWith("token:debit", {
            address: account.address,
            amount: BigInt(1),
        });
    });
    it('should save the new NFT to the database', async () =&gt; {
        await transactionAsset.apply(context);
        const allTokens = await getAllNFTTokens(stateStore);
        expect(allTokens).toEqual( [nftToken]);
    });

});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="invalid-cases"><a class="anchor" href="#invalid-cases"></a>Invalid cases</h4>
<div class="paragraph">
<p>The test for the <code>invalid cases</code> test is implemented as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">describe('invalid cases', () =&gt; {

    it('should throw error if name is already registered', async () =&gt; {
        await transactionAsset.apply(context);
        await expect(transactionAsset.apply(context)).rejects.toThrow(
            'The NFT name "Squirtle" is already registered',
        );
    });
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="run-the-tests"><a class="anchor" href="#run-the-tests"></a>Run the tests</h3>
<div class="paragraph">
<p>After the tests have been implemented, run the test suite again to check if all tests pass successfully:</p>
</div>
<div class="listingblock">
<div class="title">/new_app/</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">yarn run test</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the logic of the asset and the test for the asset was implemented correctly, all tests should pass:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>yarn run v1.22.10
$ jest --passWithNoTests
 PASS  test/unit/modules/nft/nft_module.spec.ts
 PASS  test/unit/plugins/nft_api/nft_api_plugin.spec.ts
 PASS  test/unit/modules/my_module/my_module_module.spec.ts
 PASS  test/commands/account/create.spec.ts
 PASS  test/unit/modules/nft/assets/create_n_f_t_asset.spec.ts (6.606 s)

Test Suites: 5 passed, 5 total
Tests:       22 todo, 14 passed, 36 total
Snapshots:   1 passed, 1 total
Time:        7.99 s, estimated 11 s
Ran all test suites.
✨  Done in 10.70s.</pre>
</div>
</div>
<div class="paragraph">
<p>The implementation of the unit tests for the createNFT asset is now complete.</p>
</div>
</div>
</div>
</div>
    <div class="bottom-links">
    <div>
      <a class="bottom-link" href="/documentation/lisk-sdk/guides/app-development/plugin.html"><i class="icofont-double-left icofont-3x"></i>Creating a new plugin
    </a>
    </div><div>
      <a class="bottom-link" href="/documentation/lisk-sdk/guides/app-development/genesis-block.html">Generating a genesis block<i class="icofont-double-right icofont-3x"></i>
      </a>
    </div>
  </div>






<!--{]> pagination}}-->
</article>
<aside class="article-aside hidden" role="navigation">
</aside>


<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
  </div>
</div>
<footer class="footer">
    <div class="footer__container">
        <div class="footer__copyright">
            <div class="institutional-links-2">
                <span class="institutional-links-2__item">© 2021 Lisk Foundation</span>
              <ul class="footer-links">
                <li><a class="institutional-links-2__item" href="https://lisk.io/terms-conditions" class="institutional-links-2-item">Terms & Conditions</a></li>
                <li><a class="institutional-links-2__item" href="https://lisk.io/privacy" class="institutional-links-2-item">Privacy Policy</a></li>
                <li><a class="institutional-links-2__item" href="https://lisk.io/contact" class="institutional-links-2-item">Contact</a></li>
              </ul>
            </div>
            <p class="footer__copyright-text">Lisk is a foundation registered in Zug, Switzerland
            </p>
        </div>
        <div class="footer__logo-container">
            <img src="../../../_/img/lisk-logo-light.svg" class="footer__lisk-logo"/>
        </div>
        <div class="community-section">
            <p class="community-section__text">Follow Lisk on: </p>
            <div class="community-section__icons">
                <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer__icon icon-github"></a>
                <a href="https://twitter.com/LiskHQ" title="Twitter" target="_blank" class="footer__icon icon-twitter"></a>
                <a href="https://lisk.chat" title="Discord" target="_blank" class="footer__icon icon-discord"></a>
                <a href="https://www.reddit.com/r/Lisk/" title="Reddit" target="_blank" class="footer__icon icon-reddit"></a>
                <a href="https://www.facebook.com/LiskHQ" title="Facebook" target="_blank" class="footer__icon icon-facebook"></a>
            </div>
        </div>
    </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../../_/js/vendor/top-versions.js"></script>
<script async src="../../../_/js/vendor/custom.js"></script>
  <script src="../../../_/js/vendor/docsearch.min.js"></script>
  <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js -->
  <script>
    function focusSearchInput () { document.querySelector('#search-input').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInput()
    window.addEventListener('load', focusSearchInput)
  </script>

  </body>
</html>
