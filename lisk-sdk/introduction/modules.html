<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Modules - Lisk  SDK  Docs</title>
    <link rel="canonical" href="https://lisk.com/documentation/lisk-sdk/introduction/modules.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-extra.css">
      <link rel="stylesheet" href="../../_/css/vendor/docsearch.min.css">
      <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css -->
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script src="../../_/js/vendor/medium-zoom.min.js"></script>
<link rel="icon" href="../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<script data-cookieconsent="ignore" type="text/javascript" id="GTM">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({"gtm.start":
          new Date().getTime(),event:"gtm.js"});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!="dataLayer"?"&amp;l="+l:"";j.async=true;
  j.crossOrigin="anonymous";j.src=
          "https://www.googletagmanager.com/gtm.js?id="+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,"script","dataLayer","GTM-NKNKGHL");</script>

<script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
<header class="header">
  <nav class="navbar">
      <div class="navbar-content">
        <div class="navbar-brand">
          <a href="https://lisk.io" title="Lisk.io" class="lisk-logo"></a>
            <span  class="nav-brand__name-area">
              <strong class="nav-brand__name-area__title">SDK</strong>
                        </span>
          <div class="top-versions page-versions">
  <button class="version-menu-toggle top-version-menu-toggle" title="Show other versions of page">5.2.0 (latest)</button>
  <div class="version-menu">
    <a class="version is-current" href="modules.html">5.2.0 (latest)</a>
    <a class="version is-missing" href="../v4/index.html">4.0.0</a>
    <a class="version is-missing" href="../v3/index.html">3.0.2</a>
    <a class="version is-missing" href="../v2/index.html">2.3.9</a>
  </div>
</div>
          <button class="navbar-burger" data-target="topbar-nav">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
          <div class="navbar-end">
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="">Documentations</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" href="https://lisk.com/documentation/lisk-sdk/">Lisk SDK</a>
                <a class="navbar-item" href="https://lisk.com/documentation/lisk-service/">Lisk Service</a>
                <a class="navbar-item" href="https://lisk.com/documentation/lisk-core/">Lisk Core</a>
              </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="">Resources</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" href=""><strong>Lisk Service API</strong></a>
                <a class="navbar-item" href="https://lisk.com/documentation/lisk-service/references/api.html">Mainnet</a>
                <a class="navbar-item" href="https://lisk.com/documentation/lisk-service/references/api-testnet.html">Testnet</a>
                <hr class="navbar-divider">
                <a class="navbar-item" href=""><strong>Lisk Network Explorer</strong></a>
                <a class="navbar-item" target="_blank" href="https://lisk.observer/">Lisk Observer<i class="icofont-external-link"></i></a>
                <a class="navbar-item" target="_blank" href="https://liskscan.io/">LISKscan<i class="icofont-external-link"></i></a>
              </div>
            </div>
          </div>
            <div class="navbar-menu search-box hide-for-print">
              <input id="search-input" type="text" placeholder="Search">
            </div>
        </div>
        <div class="navbar-item navbar-right">
<!--
          <a href="https://lisk.chat" title="Lisk Chat" target="_blank" class="footer__icon icon-discord-2x"></a>
-->
          <a href="https://github.com/LiskHQ" title="Lisk GitHub" target="_blank" class="footer__icon icon-github-2x"></a>
          <span class="control">
            <a class="button is-primary" target="_blank" title="Lisk Dev Forum" href="https://dev.lisk.io/">Get help</a>
          </span>
        </div>
      </div>
  </nav>
</header>
<div class="body-container">
  <div class="body">
<div class="nav-container" data-component="lisk-sdk" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Lisk SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="1">
    <a class="nav-link" href="../index.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="blockchain-applications.html">Blockchain applications</a>
  </li>
  <li class="nav-item is-current-page single-page" data-depth="2">
    <a class="nav-link" href="modules.html">Modules</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="plugins.html">Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced explanations</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../advanced-explanations/architecture.html">SDK Architecture</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../advanced-explanations/communication.html">Communication</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../advanced-explanations/rpc-endpoints.html">RPC endpoints</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../advanced-explanations/schemas.html">Schemas</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Development guides</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/setup.html">Creating a new blockchain application</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/module.html">Creating a module</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/genesis-block.html">Generating a genesis block</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/asset.html">Creating a module asset</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/plugin.html">Creating a plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/configuration.html">Configuring a blockchain application</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/dashboard.html">Interacting with the blockchain application via the dashboard plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/frontend.html">Creating a frontend</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/testing.html">Testing the application</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/app-development/launch.html">Launching a blockchain application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Management guides</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/node-management/forging.html">Enabling forging</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/node-management/logging.html">Managing logs</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/node-management/signing-transactions-offline.html">Creating transactions and signing them offline</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/node-management/non-forging-node-protection.html">Protecting a non-forging node</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../guides/node-management/forging-node-protection.html">Protecting a forging node</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tutorials</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../tutorials/index.html">Tutorials overview</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../tutorials/nft.html">Non-fungible token (NFT) Tutorial</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../tutorials/srs.html">Social Recovery System (SRS) Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Name Service (LNS) Tutorial</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../tutorials/lns/index.html">Overview</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../tutorials/lns/1-blockchain.html">Chapter 1: Blockchain</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../tutorials/lns/2-frontend.html">Chapter 2: Frontend</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../tutorials/lns/3-cli.html">Chapter 3: CLI</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../tutorials/lns/4-tests.html">Chapter 4: Tests</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../references/application-cli.html">Application CLI Commands</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../references/config.html">Configuration reference</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Commander</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-commander/index.html">What is Lisk Commander?</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-commander/commands.html">Commands</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-commander/sensitive-inputs.html">Sensitive inputs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Elements</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-elements/index.html">What is Lisk Elements?</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Frontend</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/client.html">Client</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Backend</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/api-client.html">API client</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/bft.html">BFT</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/chain.html">Chain</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/codec.html">Codec</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/cryptography.html">Cryptography</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/db.html">DB</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/genesis.html">Genesis</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/p2p.html">P2P</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/passphrase.html">Passphrase</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/transaction-pool.html">Transaction pool</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/transactions.html">Transactions</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/tree.html">Tree</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/utils.html">Utils</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-elements/validator.html">Validator</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Framework</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-framework/index.html">Framework interfaces</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="../references/lisk-framework/test-suite.html">The Lisk SDK testing utilities</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SDK modules</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/token-module.html">Token module</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/sequence-module.html">Sequence module</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/keys-module.html">Keys module</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/dpos-module.html">DPoS module</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SDK plugins</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/http-api-plugin.html">HTTP API plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/dashboard-plugin.html">Dashboard plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/faucet-plugin.html">Faucet plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/forger-plugin.html">Forger plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/report-misbehavior-plugin.html">Report misbehavior plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="../references/lisk-framework/monitor-plugin.html">Monitor plugin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item single-page" data-depth="1">
    <a class="nav-link" href="../glossary.html">Glossary and Abbreviations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk protocol</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/index.html">What is the Lisk protocol?</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/accounts.html">Accounts</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/transactions.html">Transactions</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/blocks.html">Blocks</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/consensus-algorithm.html">Consensus algorithm</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/network.html">Network</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="../protocol/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk SDK</span>
    <span class="version">5.2.0 (latest)</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Lisk Core</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-core/index.html">3.0.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-core/v2/index.html">2.1.7</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Lisk SDK</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">5.2.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../v4/index.html">4.0.0</a>
        </li>
        <li class="version">
          <a href="../v3/index.html">3.0.2</a>
        </li>
        <li class="version">
          <a href="../v2/index.html">2.3.9</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Lisk Service</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-service/index.html">0.5.0 (latest)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" title="Home" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Lisk SDK</a></li>
    <li>Introduction</li>
    <li><a href="modules.html">Modules</a></li>
  </ul>
</nav>
  <div class="page-versions toolbar-versions">
  <button class="version-menu-toggle" title="Show other versions of page">5.2.0 (latest)</button>
  <div class="version-menu">
    <a class="version is-current" href="modules.html">5.2.0 (latest)</a>
    <a class="version is-missing" href="../v4/index.html">4.0.0</a>
    <a class="version is-missing" href="../v3/index.html">3.0.2</a>
    <a class="version is-missing" href="../v2/index.html">2.3.9</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/docs-sdk/modules/ROOT/pages/introduction/modules.adoc"><i class="icofont-ui-edit"></i>Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Modules</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Modules hold all logic that is changing the state of the blockchain; or in other words all logic that makes changes on the blockchain.</p>
</div>
<div class="paragraph">
<p>Modules can be registered to a blockchain application to extend the <a href="blockchain-applications.html#on-chain-logic" class="page">on-chain logic</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">When to create a module</div>
<div class="paragraph">
<p>Modules enable to&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Define how data is stored on the blockchain.</p>
</li>
<li>
<p>Define logic that is executed per block.</p>
</li>
<li>
<p>Define logic that is executed per transaction.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For a more practical guide how to create a new module, check out the guide <a href="../guides/app-development/module.html" class="page">Creating a module</a>.</p>
</div>
<div class="paragraph">
<p>If you wish to view an example of a fully implemented module, check out the following examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <a href="https://github.com/LiskHQ/lisk-sdk-examples/blob/development/tutorials/hello-world/blockchain_app/hello_module/hello_module.js">Hello module</a> from the <a href="../guides/app-development/setup.html#the-hello-world-application" class="page">Hello World</a> blockchain application.</p>
</li>
<li>
<p>the <a href="https://github.com/LiskHQ/lisk-sdk-examples/blob/development/tutorials/nft/blockchain_app/nft_module/index.js">NFT module</a> from the <a href="../tutorials/nft.html" class="page">Non-fungible token (NFT) Tutorial</a> tutorial</p>
</li>
<li>
<p>the <a href="https://github.com/LiskHQ/lisk-sdk-examples/blob/development/tutorials/social-recovery/blockchain_app/srs_module/index.js">SRS module</a> from the <a href="../tutorials/srs.html" class="page">Social Recovery System (SRS) Tutorial</a> tutorial</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#adding-a-module-to-the-application">Adding a module to the application</a></li>
<li><a href="#module-anatomy">Module anatomy</a></li>
<li><a href="#the-module-class">The module class</a></li>
<li><a href="#module-id">Module ID</a></li>
<li><a href="#module-name">Module name</a></li>
<li><a href="#logger">Logger</a></li>
<li><a href="#genesis-config">Genesis config</a></li>
<li><a href="#interfaces">Interfaces</a>
<ul class="sectlevel2">
<li><a href="#dataaccess">dataAccess</a></li>
<li><a href="#actions">Actions</a></li>
<li><a href="#events">Events</a></li>
</ul>
</li>
<li><a href="#state-changes-execution-logic">State changes &amp; execution logic</a>
<ul class="sectlevel2">
<li><a href="#the-state-store">The state store</a></li>
<li><a href="#the-reducerhandler">The reducerHandler</a></li>
<li><a href="#assets">Assets</a>
<ul class="sectlevel3">
<li><a href="#asset-anatomy">Asset anatomy</a></li>
<li><a href="#transaction-asset-schema">Transaction asset schema</a></li>
<li><a href="#validate">Validate</a></li>
<li><a href="#apply">Apply</a></li>
</ul>
</li>
<li><a href="#reducers">Reducers</a></li>
<li><a href="#lifecycle-hooks">Lifecycle Hooks</a>
<ul class="sectlevel3">
<li><a href="#beforetransactionapply">beforeTransactionApply()</a></li>
<li><a href="#aftertransactionapply">afterTransactionApply()</a></li>
<li><a href="#aftergenesisblockapply">afterGenesisBlockApply()</a></li>
<li><a href="#beforeblockapply">beforeBlockApply()</a></li>
<li><a href="#afterblockapply">afterBlockApply()</a></li>
<li><a href="#consensus">Consensus</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#account-schema">Account schema</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="adding-a-module-to-the-application"><a class="anchor" href="#adding-a-module-to-the-application"></a>Adding a module to the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Modules need to be registered to become available in the application.
If the application was <a href="../guides/app-development/setup.html" class="page">bootstrapped</a> with Lisk Commander, they are registered in the file <code>src/app/modules.ts</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Registering a new module requires the generation of a new genesis block if the module defines an <a href="#account-schema">Account schema</a>.
This always results in a hardfork of the blockchain of the application.</p>
</div>
<div class="paragraph">
<p>Check out the <a href="../guides/app-development/genesis-block.html" class="page">Generating a genesis block</a> guide for more information on how to generate a new genesis block for your application.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: How to register a module with the application in <code>modules.ts</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { Application } from 'lisk-sdk';
import { SomeModule } from "some-module"; <i class="conum" data-value="1"></i><b>(1)</b>

export const registerModules = (app: Application): void =&gt; {
    app.registerModule(SomeModule); <i class="conum" data-value="2"></i><b>(2)</b>
};</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import the module from an NPM package or from a local path.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Add this line to register the module to the application.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="module-anatomy"><a class="anchor" href="#module-anatomy"></a>Module anatomy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All important parts of a module are explained in more detail and are shown in the diagram below.</p>
</div>
<div class="paragraph">
<div class="title">Anatomy of a module</div>
<p><span class="image"><img src="../_images/intro/module-asset.png" alt="module asset"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-module-class"><a class="anchor" href="#the-module-class"></a>The module class</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each module is constructed as a class which extends from the <a href="../references/lisk-framework/index.html#the-basemodule" class="page">BaseModule</a>.</p>
</div>
<div class="paragraph">
<p>The base module provides an interface which needs to be completed by implementing the described components of a module as listed below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseModule } = require('lisk-sdk');

class HelloModule extends BaseModule {

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="module-id"><a class="anchor" href="#module-id"></a>Module ID</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The module ID is the unique identifier for a module in the application.</p>
</div>
<div class="paragraph">
<p>The module IDs <code>0</code>-<code>999</code> are reserved for official modules for the Lisk SDK.
This means that the minimum ID for a new module is <code>1000</code>.
The maximum value for a module ID is <code>2^32 - 1</code>(equals 4,294,967,295), because it is stored as a <code>uint32</code> value.</p>
</div>
<div class="paragraph">
<p>It is also important to note, that module IDs do not need to be in succession, the only requirement is that they are unique within the blockchain application.
So as an example, it is valid to register multiple modules to the application which have the following module IDs: <code>1003</code>, <code>1000</code>, <code>2500001</code> as they are in the allowed number range, and each ID is different.</p>
</div>
<div class="listingblock">
<div class="title">Example: ID of the Hello module from the Hello World app</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">id = 1000;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="module-name"><a class="anchor" href="#module-name"></a>Module name</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The module name is the human readable unique identifier for the module.</p>
</div>
<div class="paragraph">
<p>It is used as a prefix in the <a href="../advanced-explanations/communication.html#alias" class="page">alias</a> of events and actions, and as a key label to to add the properties of the <a href="#account-schema">Account schema</a> to the user accounts <sup class="footnote" id="_footnote_account_footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>.</p>
</div>
<div class="listingblock">
<div class="title">Example: Name of the Hello module from the Hello World app</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">name = 'hello';</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logger"><a class="anchor" href="#logger"></a>Logger</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The logger is accessible inside of a module under <code>this._logger</code>.
As the name suggests, the logger creates log messages for the module for the different log levels:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>trace</p>
</li>
<li>
<p>debug</p>
</li>
<li>
<p>info</p>
</li>
<li>
<p>warn</p>
</li>
<li>
<p>error</p>
</li>
<li>
<p>fatal</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">this._logger.debug(nextRound, 'Updating delegate list for');</code></pre>
</div>
</div>
<div class="paragraph">
<p>The logger expects 2 arguments:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Data of the log message (object).</p>
</li>
<li>
<p>Message of the log message (string).</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="genesis-config"><a class="anchor" href="#genesis-config"></a>Genesis config</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The genesis configuration is accessible in a module under the variable <code>this.config</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">console.log(this.config.blockTime);
// 10</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="interfaces"><a class="anchor" href="#interfaces"></a>Interfaces</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Modules can expose interfaces (<a href="#actions">Actions</a>, <a href="#events">Events</a>), which allow other components of the application to interact with the module.</p>
</div>
<div class="paragraph">
<p><a href="#actions">Actions</a> and <a href="#events">Events</a> are exposed to <a href="plugins.html" class="page">Plugins</a> and to external services.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
View the "Interfaces" section of the <a href="../advanced-explanations/communication.html#interfaces" class="page">Communication</a> page to see an overview about the different interfaces and their accessibility in modules, plugins, and external services.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="dataaccess"><a class="anchor" href="#dataaccess"></a>dataAccess</h3>
<div class="paragraph">
<p>Use the property <code>this._dataAccess</code> to access data from the blockchain in the module.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Updating and changing of data on the blockchain is only allowed inside of <a href="#assets">Assets</a> and <a href="#lifecycle-hooks">Lifecycle Hooks</a> via <a href="#the-state-store">The state store</a>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const res = await this._dataAccess.getChainState('hello:helloCounter');</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The data is encoded in the database, therefore it needs to be decoded after receiving it with <code>this._dataAccess</code>.</p>
</div>
<div class="paragraph">
<p>For more information about this topic, check out the <a href="../advanced-explanations/schemas.html" class="page">Schemas</a> page.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following functions are available via <code>this._dataAccess</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">export interface BaseModuleDataAccess {
	getChainState(key: string): Promise&lt;Buffer | undefined&gt;;
	getAccountByAddress&lt;T&gt;(address: Buffer): Promise&lt;Account&lt;T&gt;&gt;;
	getLastBlockHeader(): Promise&lt;BlockHeader&gt;;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="actions"><a class="anchor" href="#actions"></a>Actions</h3>
<div class="paragraph">
<p>Actions are functions which can be <a href="../advanced-explanations/communication.html#how-to-invoke-actions" class="page">invoked</a> via Remote-Procedure-Calls (RPC) by plugins and external services, to request data from the module.</p>
</div>
<div class="listingblock">
<div class="title">Example: Actions of the Hello module from the Hello World app</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">actions = {
    amountOfHellos: async () =&gt; {
        const res = await this._dataAccess.getChainState(CHAIN_STATE_HELLO_COUNTER);
        const count = codec.decode(
            helloCounterSchema,
            res
        );
        return count;
    },
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="events"><a class="anchor" href="#events"></a>Events</h3>
<div class="paragraph">
<p>Events are <a href="../advanced-explanations/communication.html#channel-for-modules" class="page">published</a> by the module on relevant occasions.
Plugins and external services can <a href="../advanced-explanations/communication.html#how-to-publish-and-subscribe-to-events" class="page">subscribe</a> to these events and as a result, they will be notified immediately, every time a new event is published.</p>
</div>
<div class="listingblock">
<div class="title">Example: Events of the Hello module from the Hello World app</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">events = ['newHello'];</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="state-changes-execution-logic"><a class="anchor" href="#state-changes-execution-logic"></a>State changes &amp; execution logic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The parts which contain the logic to perform state mutation on the blockchain are possibly the most important part of the module, as they define the underlying business logic and general behavior of a module.</p>
</div>
<div class="paragraph">
<p>It is possible to change the state of the blockchain in the <a href="#reducers">Reducers</a>, <a href="#lifecycle-hooks">Lifecycle Hooks</a> or <a href="#assets">Assets</a> of a module.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
All of the logic implemented in a module / asset must be “deterministic” and executable within the block time.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="the-state-store"><a class="anchor" href="#the-state-store"></a>The state store</h3>
<div class="paragraph">
<p>The <code>stateStore</code> is used to mutate the state of the blockchain data, or to retrieve data from the blockchain.</p>
</div>
<div class="paragraph">
<p>Inside of a module, the <code>stateStore</code> is available for <a href="#reducers">Reducers</a>, <a href="#assets">Assets</a> and all <a href="#lifecycle-hooks">Lifecycle Hooks</a>.</p>
</div>
<div class="listingblock">
<div class="title">Interface of <code>stateStore</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">interface StateStore {
	readonly account: {
		get&lt;T = AccountDefaultProps&gt;(address: Buffer): Promise&lt;Account&lt;T&gt;&gt;;
		getOrDefault&lt;T = AccountDefaultProps&gt;(address: Buffer): Promise&lt;Account&lt;T&gt;&gt;;
		set&lt;T = AccountDefaultProps&gt;(address: Buffer, updatedElement: Account&lt;T&gt;): Promise&lt;void&gt;;
		del(address: Buffer): Promise&lt;void&gt;;
	};
	readonly chain: {
		lastBlockHeaders: ReadonlyArray&lt;BlockHeader&gt;;
		lastBlockReward: bigint;
		networkIdentifier: Buffer;
		get(key: string): Promise&lt;Buffer | undefined&gt;;
		set(key: string, value: Buffer): Promise&lt;void&gt;;
	};
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="the-reducerhandler"><a class="anchor" href="#the-reducerhandler"></a>The reducerHandler</h3>
<div class="paragraph">
<p><a href="#reducers">Reducers</a> of modules can be invoked inside of the <a href="#lifecycle-hooks">Lifecycle Hooks</a> and <a href="#assets">Assets</a> of other modules via the <code>reducerHandler</code>.</p>
</div>
<div class="listingblock">
<div class="title">Example: Invoking the "debit" reducer of the Token module</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">// debit tokens from sender account
await reducerHandler.invoke("token:debit", {
  address: senderAddress,
  amount: asset.initValue,
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="assets"><a class="anchor" href="#assets"></a>Assets</h3>
<div class="paragraph">
<p>Assets are responsible for executing logic that introduces state changes on the blockchain, based on input parameters which are provided by the users as transactions.</p>
</div>
<div class="paragraph">
<p>A blockchain application can accept many different kinds of transactions, depending on its use case.
Every transaction type is handled by a specific <a href="#assets">asset</a> of a module in the application.
The <a href="../advanced-explanations/architecture.html#application" class="page">default application</a> already supports the following transactions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../references/lisk-framework/token-module.html" class="page">Token module</a>: <a href="../protocol/transactions.html#transfer" class="page">Token transfer</a></p>
</li>
<li>
<p><a href="../references/lisk-framework/dpos-module.html" class="page">DPoS module</a>:</p>
<div class="ulist">
<ul>
<li>
<p><a href="../protocol/transactions.html#delegate" class="page">Delegate registration</a></p>
</li>
<li>
<p><a href="../protocol/transactions.html#vote" class="page">Delegate vote</a></p>
</li>
<li>
<p><a href="../protocol/transactions.html#unlock" class="page">Token unlock</a></p>
</li>
<li>
<p><a href="../protocol/transactions.html#pom" class="page">Delegate misbehavior report</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="../references/lisk-framework/keys-module.html" class="page">Keys module</a>: <a href="../protocol/transactions.html#multisignature" class="page">Multisignature group registration</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add support for a new transaction to the application, it is required to implement a new asset and to add the asset to a module.</p>
</div>
<div class="listingblock">
<div class="title">Example: Assets of the Hello module from the Hello World app</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">transactionAssets = [ new HelloAsset() ];</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To learn how to create a new asset, check out the <a href="../guides/app-development/asset.html" class="page">Creating a module asset</a> guide.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="asset-anatomy"><a class="anchor" href="#asset-anatomy"></a>Asset anatomy</h4>
<div class="paragraph">
<p>Each asset is constructed as a class which extends from the <a href="../references/lisk-framework/index.html#the-baseasset" class="page">BaseAsset</a>.</p>
</div>
<div class="paragraph">
<p>The base asset provides an interface which needs to be completed by implementing the described components of an asset listed below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/intro/asset.png" alt="asset">
</div>
</div>
</div>
<div class="sect3">
<h4 id="transaction-asset-schema"><a class="anchor" href="#transaction-asset-schema"></a>Transaction asset schema</h4>
<div class="paragraph">
<p>The asset schema defines the <strong>custom data structure of the transaction</strong>.</p>
</div>
<div class="paragraph">
<p>It defines which properties can be included, if they are optional or required, and also which data types are to expect.</p>
</div>
<div class="paragraph">
<p>If a transaction object does not match the corresponding schema, the transaction will not be accepted by the node.</p>
</div>
<div class="paragraph">
<p>Asset schemas are defined in a modified JSON schema.
For more information about this topic, check out the <a href="../advanced-explanations/schemas.html" class="page">Schemas</a> page.</p>
</div>
<div class="listingblock">
<div class="title">Example of an asset schema</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">schema = {
    $id: 'lisk/hello/asset', <i class="conum" data-value="1"></i><b>(1)</b>
    type: 'object',
    required: ["helloString"], <i class="conum" data-value="2"></i><b>(2)</b>
    properties: { <i class="conum" data-value="3"></i><b>(3)</b>
        helloString: {
            dataType: 'string',
            fieldNumber: 1,
        },
    }
};</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The ID under which assets are saved in the database.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The required properties of the transaction asset.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Contains the properties of the transaction asset.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="validate"><a class="anchor" href="#validate"></a>Validate</h4>
<div class="paragraph">
<p>As the name suggests, the <code>validate()</code> function validates the posted transaction data to check it contains the expected format.</p>
</div>
<div class="paragraph">
<p>The following variables are available inside the <code>validate()</code> function:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>asset</code>: The custom data of the transaction (defined in <a href="#transaction-asset-schema">Transaction asset schema</a>) posted to the node.</p>
</li>
<li>
<p><code>transaction</code>: The complete transaction object which was posted to the node.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the function throws any errors, the transaction will not be applied by the node.</p>
</div>
<div class="paragraph">
<p>If the function does not throw any errors, the transaction will passed to the <code>apply()</code> function.</p>
</div>
<div class="listingblock">
<div class="title">Example: validate() function of the CreateNFT asset of the NFT example app</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">validate({asset}) {
    if (asset.name === "Mewtwo") {
        throw new Error("Illegal NFT name: Mewtwo");
    }
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="apply"><a class="anchor" href="#apply"></a>Apply</h4>
<div class="paragraph">
<p>The <code>apply()</code> function of an asset applies the desired business logic on the blockchain, based on the data posted in the transaction.</p>
</div>
<div class="paragraph">
<p>The following variables are available inside the <code>apply()</code> function:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>asset</code>: The custom data of the transaction (defined in <a href="#transaction-asset-schema">Transaction asset schema</a>) posted to the node.</p>
</li>
<li>
<p><code>stateStore</code>: See <a href="#the-state-store">The state store</a>.</p>
</li>
<li>
<p><code>reducerHandler</code>: See <a href="#the-reducerhandler">reducerHandler</a>.</p>
</li>
<li>
<p><code>transaction</code>: The complete transaction object which was posted to the node.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example: apply() function of the Hello asset of the Hello World example app</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async apply({ asset, stateStore, reducerHandler, transaction }) {
    // Get sender account details
    const senderAddress = transaction.senderAddress;
    const senderAccount = await stateStore.account.get(senderAddress);
    // Add the hello string to the sender account
    senderAccount.hello.helloMessage = asset.helloString;
    stateStore.account.set(senderAccount.address, senderAccount);
    // Get the hello counter and decode it
    let counterBuffer = await stateStore.chain.get(
        CHAIN_STATE_HELLO_COUNTER
    );
    let counter = codec.decode(
        helloCounterSchema,
        counterBuffer
    );
    // Increment the hello counter by +1
    counter.helloCounter++;
    // Save the updated counter on the chain
    await stateStore.chain.set(
        CHAIN_STATE_HELLO_COUNTER,
        codec.encode(helloCounterSchema, counter)
    );
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="reducers"><a class="anchor" href="#reducers"></a>Reducers</h3>
<div class="paragraph">
<p>Reducers are functions which can be invoked via Remote-Procedure-Calls (RPC) by other modules.</p>
</div>
<div class="paragraph">
<p>Reducers have access to the <a href="#the-state-store">state store</a>.</p>
</div>
<div class="paragraph">
<p>Modules and Assets can invoke reducers through <a href="#the-reducerhandler">The reducerHandler</a>.</p>
</div>
<div class="listingblock">
<div class="title">Example: Reducers of the Token module</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">public reducers = {
    // Credit tokens to an account
    credit: async (params: Record&lt;string, unknown&gt;, stateStore: StateStore): Promise&lt;void&gt; =&gt; {
        const { address, amount } = params;
        if (!Buffer.isBuffer(address)) {
            throw new Error('Address must be a buffer');
        }
        if (typeof amount !== 'bigint') {
            throw new Error('Amount must be a bigint');
        }
        if (amount &lt;= BigInt(0)) {
            throw new Error('Amount must be a positive bigint.');
        }
        const account = await stateStore.account.getOrDefault&lt;TokenAccount&gt;(address);
        account.token.balance += amount;
        if (account.token.balance &lt; this._minRemainingBalance) {
            throw new Error(
                `Remaining balance must be greater than ${this._minRemainingBalance.toString()}`,
            );
        }
        await stateStore.account.set(address, account);
    },
    // Debit tokens from an account
    debit: async (params: Record&lt;string, unknown&gt;, stateStore: StateStore): Promise&lt;void&gt; =&gt; {
        const { address, amount } = params;
        if (!Buffer.isBuffer(address)) {
            throw new Error('Address must be a buffer');
        }
        if (typeof amount !== 'bigint') {
            throw new Error('Amount must be a bigint');
        }
        if (amount &lt;= BigInt(0)) {
            throw new Error('Amount must be a positive bigint.');
        }
        const account = await stateStore.account.getOrDefault&lt;TokenAccount&gt;(address);
        account.token.balance -= amount;
        if (account.token.balance &lt; this._minRemainingBalance) {
            throw new Error(
                `Remaining balance must be greater than ${this._minRemainingBalance.toString()}`,
            );
        }
        await stateStore.account.set(address, account);
    },
    // Get the balance of an specific account
    getBalance: async (
        params: Record&lt;string, unknown&gt;,
        stateStore: StateStore,
    ): Promise&lt;bigint&gt; =&gt; {
        const { address } = params;
        if (!Buffer.isBuffer(address)) {
            throw new Error('Address must be a buffer');
        }
        const account = await stateStore.account.getOrDefault&lt;TokenAccount&gt;(address);
        return account.token.balance;
    },
    // Returns the minimum remaining balance for accounts
    getMinRemainingBalance: async (): Promise&lt;bigint&gt; =&gt; this._minRemainingBalance,
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lifecycle-hooks"><a class="anchor" href="#lifecycle-hooks"></a>Lifecycle Hooks</h3>
<div class="paragraph">
<p>Lifecycle hooks allow the execution of logic at specific moments in the <a href="../advanced-explanations/architecture.html#life-cycle-of-a-block" class="page">block lifecycle</a> of the application.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/intro/lifecycle-hooks.png" alt="lifecycle hooks">
</div>
</div>
<div class="listingblock">
<div class="title">Example: afterTransactionApply() of the Hello module from the Hello World app</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async afterTransactionApply({transaction, stateStore, reducerHandler}) {
  // If the transaction is a hello transaction
  if (transaction.moduleID === this.id &amp;&amp; transaction.assetID === HelloAssetID) {
    // Decode the transaction asset
    const helloAsset = codec.decode(
      helloAssetSchema,
      transaction.asset
    );

    // And publish a new hello:newHello event,
    // including the latest hello message and the sender.
    this._channel.publish('hello:newHello', {
      sender: transaction._senderAddress.toString('hex'),
      hello: helloAsset.helloString
    });
  }
};</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="beforetransactionapply"><a class="anchor" href="#beforetransactionapply"></a>beforeTransactionApply()</h4>
<div class="paragraph">
<p>This hook is applied before each transaction.</p>
</div>
<div class="paragraph">
<p>The following variables are available inside this hook:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>transaction</code>: The complete transaction object which was posted to the node.</p>
</li>
<li>
<p><code>stateStore</code>: See <a href="#the-state-store">The state store</a>.</p>
</li>
<li>
<p><code>reducerHandler</code>: See <a href="#the-reducerhandler">reducerHandler</a>.</p>
</li>
<li>
<p><code>this._channel</code>: See <a href="../advanced-explanations/communication.html#channel-for-modules" class="page">Channel for modules</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="aftertransactionapply"><a class="anchor" href="#aftertransactionapply"></a>afterTransactionApply()</h4>
<div class="paragraph">
<p>This hook is applied after each transaction.</p>
</div>
<div class="paragraph">
<p>The following variables are available inside this hook:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>transaction</code>: The complete transaction object which was posted to the node.</p>
</li>
<li>
<p><code>stateStore</code>: See <a href="#the-state-store">The state store</a>.</p>
</li>
<li>
<p><code>reducerHandler</code>: See <a href="#the-reducerhandler">reducerHandler</a>.</p>
</li>
<li>
<p><code>this._channel</code>: See <a href="../advanced-explanations/communication.html#channel-for-modules" class="page">Channel for modules</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="aftergenesisblockapply"><a class="anchor" href="#aftergenesisblockapply"></a>afterGenesisBlockApply()</h4>
<div class="paragraph">
<p>This hook is applied after the genesis block.</p>
</div>
<div class="paragraph">
<p>The following variables are available inside this hook:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>genesisBlock</code>: The <a href="../advanced-explanations/architecture.html#genesis-block" class="page">genesis block</a> of the application.</p>
</li>
<li>
<p><code>stateStore</code>: See <a href="#the-state-store">The state store</a>.</p>
</li>
<li>
<p><code>reducerHandler</code>: See <a href="#the-reducerhandler">reducerHandler</a>.</p>
</li>
<li>
<p><code>this._channel</code>: See <a href="../advanced-explanations/communication.html#channel-for-modules" class="page">Channel for modules</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="beforeblockapply"><a class="anchor" href="#beforeblockapply"></a>beforeBlockApply()</h4>
<div class="paragraph">
<p>This hook is applied before each block.</p>
</div>
<div class="paragraph">
<p>The following variables are available inside this hook:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>block</code>: The block before it is applied on the blockchain.</p>
</li>
<li>
<p><code>stateStore</code>: See <a href="#the-state-store">The state store</a>.</p>
</li>
<li>
<p><code>reducerHandler</code>: See <a href="#the-reducerhandler">reducerHandler</a>.</p>
</li>
<li>
<p><code>this._channel</code>: See <a href="../advanced-explanations/communication.html#channel-for-modules" class="page">Channel for modules</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="afterblockapply"><a class="anchor" href="#afterblockapply"></a>afterBlockApply()</h4>
<div class="paragraph">
<p>This hook is applied after each block.</p>
</div>
<div class="paragraph">
<p>The following variables are available inside this hook:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>block</code>: The block after it is applied on the blockchain.</p>
</li>
<li>
<p><code>stateStore</code>: See <a href="#the-state-store">The state store</a>.</p>
</li>
<li>
<p><code>reducerHandler</code>: See <a href="#the-reducerhandler">reducerHandler</a>.</p>
</li>
<li>
<p><code>this._channel</code>: See <a href="../advanced-explanations/communication.html#channel-for-modules" class="page">Channel for modules</a>.</p>
</li>
<li>
<p><code>consensus</code>: See <a href="#consensus">Consensus</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="consensus"><a class="anchor" href="#consensus"></a>Consensus</h4>
<div class="paragraph">
<p><code>consensus</code> offers different consensus related functions to get and set the list of active delegates, and to get the finalized height of the blockchain.</p>
</div>
<div class="listingblock">
<div class="title">consensus interface</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">{
	getDelegates: () =&gt; Promise&lt;Delegate[]&gt;; <i class="conum" data-value="1"></i><b>(1)</b>
	updateDelegates: (delegates: Delegate[]) =&gt; Promise&lt;void&gt;; <i class="conum" data-value="2"></i><b>(2)</b>
	getFinalizedHeight: () =&gt; number; <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Get a list of the actively forging delegates in the current round.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Update the list of delegates for the current round.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Returns the currently finalized height of the blockchain.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="account-schema"><a class="anchor" href="#account-schema"></a>Account schema</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The account schema allows a module to store module-specific data in the user accounts <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>The definition of this schema is totally flexible and it is possible to define very complex data structures as well if necessary.</p>
</div>
<div class="paragraph">
<p>Account schemas are defined in a modified JSON schema.
For more information about this topic, check out the <a href="../advanced-explanations/schemas.html" class="page">Schemas</a> page.</p>
</div>
<div class="listingblock">
<div class="title">Example: Account schema of the Hello module from the Hello World app</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">accountSchema = {
    type: 'object',
    properties: {
        helloMessage: {
            fieldNumber: 1,
            dataType: 'string',
        },
    },
    default: {
        helloMessage: '',
    },
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>The defined properties in the account schema will be available for every user account.
They will be grouped under a key named after the <a href="#module-name">Module name</a>.</p>
</div>
<div class="paragraph">
<p>If a module with module name <code>hello</code> is registered in a <a href="../advanced-explanations/architecture.html#application" class="page">default application</a> with the above example of an account schema, the user accounts would appear as shown below:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The properties <code>token</code>, <code>sequence</code>, <code>keys</code>, <code>dpos</code> exist in the user account, because the blockchain application already has several modules <a href="blockchain-applications.html#default-modules" class="page">registered by default</a>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example user account</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "address": "ae6fff8b9c9c3a8b38193d2186638f684d64d887",
  "token": {
    "balance": "20000000000"
  },
  "sequence": {
    "nonce": "0"
  },
  "keys": {
    "numberOfSignatures": 0,
    "mandatoryKeys": [],
    "optionalKeys": []
  },
  "dpos": {
    "delegate": {
      "username": "",
      "pomHeights": [],
      "consecutiveMissedBlocks": 0,
      "lastForgedHeight": 0,
      "isBanned": false,
      "totalVotesReceived": "0"
    },
    "sentVotes": [],
    "unlocking": []
  },
  "hello": {
    "helloMessage": ""
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. For more information about accounts, check the <a href="../protocol/accounts.html" class="page">Accounts</a> page of the Lisk protocol.
</div>
</div>
    <div class="bottom-links">
    <div>
      <a class="bottom-link" href="/documentation/lisk-sdk/introduction/blockchain-applications.html"><i class="icofont-double-left icofont-3x"></i>Blockchain applications
    </a>
    </div><div>
      <a class="bottom-link" href="/documentation/lisk-sdk/introduction/plugins.html">Plugins<i class="icofont-double-right icofont-3x"></i>
      </a>
    </div>
  </div>






<!--{]> pagination}}-->
</article>
<aside class="article-aside hidden" role="navigation">
</aside>


<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
  </div>
</div>
<footer class="footer">
    <div class="footer__container">
        <div class="footer__copyright">
            <div class="institutional-links-2">
                <span class="institutional-links-2__item">© 2021 Lisk Foundation</span>
              <ul class="footer-links">
                <li><a class="institutional-links-2__item" href="https://lisk.io/terms-conditions" class="institutional-links-2-item">Terms & Conditions</a></li>
                <li><a class="institutional-links-2__item" href="https://lisk.io/privacy" class="institutional-links-2-item">Privacy Policy</a></li>
                <li><a class="institutional-links-2__item" href="https://lisk.io/contact" class="institutional-links-2-item">Contact</a></li>
              </ul>
            </div>
            <p class="footer__copyright-text">Lisk is a foundation registered in Zug, Switzerland
            </p>
        </div>
        <div class="footer__logo-container">
            <img src="../../_/img/lisk-logo-light.svg" class="footer__lisk-logo"/>
        </div>
        <div class="community-section">
            <p class="community-section__text">Follow Lisk on: </p>
            <div class="community-section__icons">
                <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer__icon icon-github"></a>
                <a href="https://twitter.com/LiskHQ" title="Twitter" target="_blank" class="footer__icon icon-twitter"></a>
                <a href="https://lisk.chat" title="Discord" target="_blank" class="footer__icon icon-discord"></a>
                <a href="https://www.reddit.com/r/Lisk/" title="Reddit" target="_blank" class="footer__icon icon-reddit"></a>
                <a href="https://www.facebook.com/LiskHQ" title="Facebook" target="_blank" class="footer__icon icon-facebook"></a>
            </div>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../_/js/vendor/top-versions.js"></script>
<script async src="../../_/js/vendor/custom.js"></script>
  <script src="../../_/js/vendor/docsearch.min.js"></script>
  <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js -->
  <script>
    function focusSearchInput () { document.querySelector('#search-input').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInput()
    window.addEventListener('load', focusSearchInput)
  </script>

  </body>
</html>
