= Lisk Interoperability
:toc: preamble
:url_blog_interop_intro: https://lisk.io/blog/research/introduction-blockchain-interoperability
:url_understand_tx: understand-blockchain/index.adoc#transactions
:url_understand_command: understand-blockchain/sdk/modules-commands.adoc#commands

The Lisk interoperability solution allows blockchain to blockchain communication by using the paradigm of *cross-chain certification*, which was introduced in detail in the research blog post {url_blog_interop_intro}["Introduction to Blockchain Interoperability"].

Basically, cross-chain certification means that information from one chain is submitted to another chain utilizing a signed object called a certificate.
Let us see more specifically how this will work in the Lisk ecosystem.

.Example: Transferring tokens across different blockchains
image::understand-blockchain/interop/cc-transfer-example.png[]

In the diagram above, Alice performs a cross-chain token transfer from her account on the sending chain to Bob’s account on the receiving chain.

For this, she sends a cross-chain token transfer transaction, `t`, on the sending chain.
When this transaction is included, her account on the sending chain is debited.

Simultaneously, a corresponding cross-chain token transfer message, `m`, containing all the relevant information is emitted.
This message is included in a cross-chain update transaction (*CCU*), which is sent to the receiving chain.
When the transaction is included, Bob’s account is credited.

[TIP]
Cross-chain messages are, however, not limited to token transfers.
Similar to transactions, cross-chain messages have an asset property.
Therefore, when building a blockchain application with the Lisk SDK, you can create custom cross-chain messages by defining the content of the asset property as needed.
For example, you could create a custom cross-chain message that contains some authenticated information from an oracle chain in its asset property.

== Terminology summary

Transaction:: An envelope object for a command, see xref:{url_understand_tx}[Understand blockchain, Transactions].
Cross-chain transaction (CCT):: Transaction generating one or more cross-chain messages.
Command:: Trigger of a state transition in the same chain, see xref:{url_understand_command}[Modules and commands].
Cross-chain command (CCC):: Trigger of a state transition coming from another chain.
Cross-chain message (CCM):: An envelope object for a cross-chain command.
Cross-chain update (CCU):: A CCU, aka "Cross-chain update transaction` is a special transaction containing cross-chain messages, certified by validators.
image:understand-blockchain/ccu.png[]

== Mainchain & Sidechains

.The Role of the LSK Token
[NOTE]
====
The LSK token is the only token that can be transferred to every chain within the Lisk ecosystem.
It will be the default token for transaction fees on sidechains, but it will be possible to configure a sidechain token for the transaction fees.
As the LSK token is listed on several exchanges, it will in most cases be the initial token that a user acquires within the Lisk ecosystem.
Once a user possesses some LSK tokens, they can exchange them for other sidechain tokens, e.g., on a decentralized exchange sidechain.

====

== Example of Interoperability Usage
Let’s look at an example to get a better impression of the capabilities of our interoperability solution.
All the following steps described here can also be seen in the image below.

Assume we have an exchange chain, a prediction market chain, and an oracle chain connected to the mainchain.
Then, a user story could look like this:

Assume a user has some LSK tokens on the mainchain, and they would like to bet on the prediction market chain, but this chain requires a special token for betting.
Therefore the following actions would apply:

. The user sends some of their LSK tokens to the exchange chain via a cross-chain token transfer message.
. The LSK tokens are then swapped for the betting tokens.
. Subsequently, the betting tokens are then sent from the exchange chain to the prediction market chain via a cross-chain token transfer message.
. On the prediction market chain, the user bets on the winner of the Nobel Prize in Physics.
. After the announcement of the Nobel prize winner, the oracle chain sends the result to the prediction market chain via a custom cross-chain message.
. The user then receives their winnings as they made the correct guess.


.Example of interoperability between the Lisk mainchain and three sidechains. The steps 2), 4), and 6) are transactions performed within a single chain. The steps 1), 3), and 5) are cross-chain messages. The cross-chain messages 3) and 5) are sidechain-to-sidechain cross-chain messages which are routed via the mainchain. The cross-chain message 1) is a mainchain-to-sidechain cross-chain token transfer message.
image::understand-blockchain/interop/high-level-overview-interoperability-fig_42x.png[]
