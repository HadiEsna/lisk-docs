<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cross-chain communication :: Lisk documentation</title>
    <link rel="canonical" href="https://lisk.com/documentation/understand-blockchain/interoperability/communication.html">
    <link rel="prev" href="index.html">
    <link rel="next" href="../sdk/index.html">
    <meta name="generator" content="Antora 3.0.0">

  <link id="theme" rel="stylesheet" title="Default" href="../../_/css/site.css">
  <link rel="stylesheet" title="Dark" href="../../_/css/dark-site.css">

    <script>var uiRootPath = '../../_'</script>
    <script src="../../_/js/vendor/medium-zoom.js"></script>
    <script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>

<link rel="icon" href="../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../.." class="lisk-logo"></a>
        <a href="../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://lisk.com/documentation">Lisk documentation</a>-->
        <div id="docsearch" class="navbar-menu search-box hide-for-print">
          <!--<input id="search-input-toolbar" type="text" placeholder="Search me ...">-->
        </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../api/lisk-node-http.html">Lisk node HTTP API</a>
            <a class="navbar-item" href="../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../api/lisk-service-http.html">Lisk Service HTTP API</a>
            <a class="navbar-item" href="../../api/lisk-service-rpc.html">Lisk Service RPC API</a>
            <a class="navbar-item" href="../../api/lisk-service-pubsub.html">Lisk Service Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Documentation</button>
    <div class="component-menu">
        <a class="component" href="../../lisk-core/index.html">Lisk Core</a>
        <a class="component" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component is-current" href="../../index.html">Lisk Documentation</a>
        <a class="component" href="../../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component" href="../../lisk-service/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
      </div>
  <span></span>
  <span></span>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Lisk Documentation</a></li>
    <li><a href="../index.html">Understand Blockchain</a></li>
    <li><a href="index.html">Lisk Interoperability</a></li>
    <li><a href="communication.html">Cross-chain communication</a></li>
  </ul>
</nav>
    <div id="docsearch-toolbar" class="search-box hide-for-print toolbar-search">
      <!--<input id="search-input" type="text" placeholder="Search me ...">-->
    </div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/1516-ccc/docs/modules/ROOT/pages/understand-blockchain/interoperability/communication.adoc"><img class="pencil">Edit this Page</a></div>
  </div>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Lisk Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/what-is-blockchain.html">What is blockchain?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/how-blockchain-works.html">How blockchain works</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/lisk-products.html">Lisk products</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../index.html">Understand Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../state-machine.html">State machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../consensus/index.html">Consensus protocols</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="index.html">Lisk Interoperability</a>
        </span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="communication.html">Cross-chain communication</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../sdk/index.html">Introduction to the Lisk SDK</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../sdk/architecture.html">SDK Architecture</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../sdk/modules-commands.html">Modules and commands</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../lisk-protocol/index.html">Lisk Protocol</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lisk-protocol/accounts.html">Accounts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lisk-protocol/blocks.html">Blocks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lisk-protocol/consensus-algorithm.html">Consensus algorithm</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lisk-protocol/network.html">Network</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lisk-protocol/transactions.html">Transactions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../lisk-protocol/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../build-blockchain/index.html">Build Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-blockchain-app.html">Creating a new blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-module.html">Creating a new module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-asset.html">Creating a new asset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-genesis-block.html">How to create a new genesis block</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-plugin.html">Creating a new plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/configure-app.html">How to configure a blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/test-app.html">Testing the blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/using-dashboard.html">Using dashboard with the blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/enable-faucet.html">How to enable a faucet for testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/launch-test-network.html">Launching a public test network</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../run-blockchain/index.html">Run Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/account-management.html">Managing accounts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/forging.html">Enabling forging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/blockchain-reset.html">Resetting and snapshotting the blockchain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/forging-node-protection.html">Protecting a forging node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/non-forging-node-protection.html">Protecting a non-forging node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/logging.html">Managing logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../integrate-blockchain/index.html">Integrate Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/calculating-min-fee.html">Calculating the minimum fee for a transaction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/create-send-transactions.html">How to send a transaction to the network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/create-tx-offline.html">Creating transactions and signing them offline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/encode-decode.html">Decoding &amp; encoding data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/create-user-interface.html">Creating a user interface</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../tutorial/index.html">Tutorials</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tutorial/nft.html">Non-fungible token (NFT) Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tutorial/srs.html">Social Recovery System (SRS) Tutorial</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../tutorial/lns/index.html">Lisk Name Service (LNS) Tutorial</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorial/lns/1-blockchain.html">Chapter 1: Blockchain</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorial/lns/2-frontend.html">Chapter 2: Frontend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorial/lns/3-cli.html">Chapter 3: CLI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorial/lns/4-tests.html">Chapter 4: Tests</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../api/lisk-node-rpc.html">RPC API for Lisk nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../api/lisk-service-http.html">Mainnet HTTP API (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../api/lisk-service-rpc.html">RPC endpoints (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../api/lisk-service-pubsub.html">Publish/Subscribe API (Lisk Service)</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Products</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-sdk/index.html">Lisk SDK</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-service/index.html">Lisk Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-core/index.html">Lisk Core</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../bug-bounty-program.html">Lisk Bug Bounty Program</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Documentation</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../lisk-core/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-core/index.html">3.0.4 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-core/v2/index.html">2.1.7</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-sdk/index.html">5.2.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-sdk/v4/index.html">4.0.0</a>
        </li>
        <li class="version">
          <a href="../../lisk-sdk/v3/index.html">3.0.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-service/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-service/index.html">0.6.4 (latest)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Cross-chain communication</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>On this page, we dive deeper into the details how cross-chain communication works in the Lisk ecosystem, by describing the different components and the general processes, how state changes are executed across chains in the Lisk ecosystem.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#inducing-state-changes-across-chains-with-ccms">Inducing state changes across chains with CCMs</a></li>
<li><a href="#using-cross-chain-transactions-to-generate-ccms">1. Using cross-chain transactions to generate CCMs</a></li>
<li><a href="#transferring-ccms-in-a-ccu">2. Transferring CCMs in a CCU</a>
<ul class="sectlevel2">
<li><a href="#sidechain-to-mainchain">2.1. Sidechain to mainchain</a></li>
<li><a href="#mainchain-to-sidechain">2.2. Mainchain to sidechain</a></li>
</ul>
</li>
<li><a href="#executing-the-ccc-on-the-receiving-chain">3. Executing the CCC on the receiving chain</a></li>
<li><a href="#complete-cross-chain-communication-flow">Complete cross-chain-communication flow</a></li>
<li><a href="#error-handling">Error handling</a>
<ul class="sectlevel2">
<li><a href="#ccm-validation-in-the-mainchain">CCM validation in the Mainchain</a></li>
<li><a href="#ccm-validation-in-the-receiving-chain">CCM validation in the receiving chain</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="inducing-state-changes-across-chains-with-ccms"><a class="anchor" href="#inducing-state-changes-across-chains-with-ccms"></a>Inducing state changes across chains with CCMs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cross-chain messages, or CCMs, are the central component of the cross-chain communication between different sidechains.</p>
</div>
<div class="paragraph">
<p>Similar to a normal transaction, a CCM includes a reference to a command that triggers state mutations.
But in case of a CCM, the command always refers to a cross-chain command, and the state changes are not only executed in the sending chain, but also in the receiving chain.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A <strong>Cross-chain message (CCM)</strong> is the envelope for a cross-chain command.</p>
</div>
<div class="paragraph">
<p><strong>Cross-chain commands</strong>, or <strong>CC-commands</strong>, induce a state transition in the receiving chain.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A CCM includes the following properties:</p>
</div>
<div class="paragraph">
<p><span class="image right"><img src="../../_images/understand-blockchain/interop/ccm.png" alt="ccm" width="300"></span></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">sending-chain ID</dt>
<dd>
<p>Used to identify the chain sending the cross-chain message.
The sending chain ID is used, for example, if the message triggers an error and has to be sent back.</p>
</dd>
<dt class="hdlist1">receiving-chain ID</dt>
<dd>
<p>Used to identify the chain receiving the cross-chain message.
On the mainchain, the receiving chain ID is read to route the message to the corresponding chain outbox.</p>
</dd>
<dt class="hdlist1">module &amp; cross-chain command name</dt>
<dd>
<p>Once the message has reached the receiving chain, the two properties <code>module</code> and <code>crossChainCommand</code> specify which logic should be used to validate and execute the message on the receiving chain.
The module always corresponds to the module which includes the specified cross-chain command.</p>
</dd>
<dt class="hdlist1">nonce</dt>
<dd>
<p>When a cross-chain message is created and added to the partner chain outbox, the nonce of the sending chain (total number of messages that were added to outboxes so far) is added to the message in the nonce property.
This allows all messages to be uniquely identified by the (sendingChainID, receivingChainID, nonce, status) tuple, which implies that the message ID defined below will be unique for all messages in the ecosystem.
The uniqueness of messages in the Lisk ecosystem is important for identifying messages with message IDs and tracking them throughout the ecosystem.</p>
</dd>
<dt class="hdlist1">fee</dt>
<dd>
<p>For all cross-chain messages, the message fee is used to account for the transaction processing in the receiving chain.
This fee must be transferred from the sending chain account to the receiving chain account in order to maintain the correct balances on all chains in the ecosystem.
The token ID for this fee is stored in the channel account and is by default the token ID of the LSK token.
As it is stored in the channel account, it does not need to be repeated in the message.
Being the main utility token of the Lisk ecosystem, the LSK token is always the token ID for this fee for channels between the Lisk mainchain and registered sidechains.</p>
</dd>
<dt class="hdlist1">parameters</dt>
<dd>
<p>The params property of the messages is defined by each module and can follow any schema, similar to the <code>params</code> property of a transaction.
The <code>params</code> property is not deserialized or validated by the Interoperability module.
In the Lisk ecosystem, all cross-chain messages are routed through the mainchain.
This means that messages should always have a sufficiently small size in order to be easily included in mainchain blocks.
As the mainchain payload size limit is 15 KiB, and other properties in the cross-chain updates will not be larger than 4 KiB, we limit the message size to 10 KiB.
To guarantee that all messages can be included and handled, sidechains in the Lisk ecosystem should have a payload size limit equal to or greater than 15 KiB (15 x 1024 bytes).</p>
</dd>
<dt class="hdlist1">status</dt>
<dd>
<p>The basic error handling for routing messages to other chains is done by the mainchain.
Information about the reason why the message failed is stored in the status property.
For example, in the case the receiving chain does not exist, is not active or has been terminated, the mainchain will return the message to the sending chain.
The sending chain can then revert the message and potentially refund users.
This design choice allows sidechains to send messages to other chains without needing to monitor the status (or even existence) of every other chain.
The constant table lists the different status codes defined by the Interoperability module.
To allow for future updates or improvements of the Interoperability module, other modules are restricted from using status codes up to 63 (included).
Other modules may use other status codes larger or equal to 64.</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CCM_STATUS_OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CCM_STATUS_MODULE_NOT_SUPPORTED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CCM_STATUS_CROSS_CHAIN_COMMAND_NOT_SUPPORTED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CCM_STATUS_CHANNEL_UNAVAILABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CCM_STATUS_RECOVERED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="using-cross-chain-transactions-to-generate-ccms"><a class="anchor" href="#using-cross-chain-transactions-to-generate-ccms"></a>1. Using cross-chain transactions to generate CCMs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s look at a example of a simple cross-chain transfer between Alice and Bob.</p>
</div>
<div class="paragraph">
<p><span class="image right"><img src="../../_images/understand-blockchain/interop/ccc-1.png" alt="ccc 1" width="300"></span></p>
</div>
<div class="paragraph">
<p>Alice has 10 LSK in her account on a chain called "Sidechain X".
In this context, we refer to Sidechain X as the sending chain.</p>
</div>
<div class="paragraph">
<p>She wants to transfer 5 LSK to Bob, who has an account on another chain, "Sidechain Y", in this context the receiving chain.</p>
</div>
<div class="paragraph">
<p>Here is where <strong>cross-chain transactions (CCTs)</strong> come into play.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A cross-chain transaction (CCT) is a transaction that, upon its execution, creates one or more cross-chain messages.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In fact, a cross-chain transaction uses the identical schema as normal transactions.
The only difference is, that a CCT refers to a <strong>cross-chain command</strong>, instead of a normal command.</p>
</div>
<div class="paragraph">
<p>This cross-chain command will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>execute the necessary changes on the sending chain (i.e. removing 5 LSK from Alices balance), and</p>
</li>
<li>
<p>also create CCMs to trigger the corresponding state changes in the receiving chain (i.e. add 5 LSK to Bobs balance).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="transferring-ccms-in-a-ccu"><a class="anchor" href="#transferring-ccms-in-a-ccu"></a>2. Transferring CCMs in a CCU</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Several cross-chain messages are collected together and posted to another chain as part of a cross-chain update transactions, aka CCU.</p>
</div>
<div class="paragraph">
<p>A CCU contains the following properties:</p>
</div>
<div class="imageblock right">
<div class="content">
<img src="../../_images/understand-blockchain/interop/ccu.png" alt="ccu" width="300">
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">sending-chain ID</dt>
<dd>
<p>Identifies the chain sending the cross-chain update.
Only cross-chain update transactions coming from registered chains are valid, registered chains are the ones with an entry in the interoperability store corresponding to their <code>chainID</code>.</p>
</dd>
<dt class="hdlist1">validators update</dt>
<dd>
<p>The chain account stores an array containing the BLS keys and BFT weights required to validate the certificate signature.
This array has to be updated if the validator set changes in the chain sending the certificate.
The difference between the stored array and the new one is included in this property.</p>
</dd>
<dt class="hdlist1">certificate</dt>
<dd>
<p>Verifies the correctness of the data sent in the CCU.
Consists of aggregated signatures of a set of the current validators of the sending chain.
Anyone can obtain the full certificate from the blockchain by obtaining the corresponding block header, computing the unsigned certificate, and then obtaining the <code>aggregateCommit</code> once the block is finalized.</p>
</dd>
<dt class="hdlist1">new certificate threshold</dt>
<dd>
<p>The threshold of block generators required to validate the certificate signature.
This certificate threshold has to be updated if its value changes in the chain sending the certificate.
In that case, the updated value is set in the <code>newCertificateThreshold</code> property of the CCU.
If <code>newCertificateThreshold</code> is set to <code>0</code>, it implies that the certificate threshold has not been changed in the sending chain.</p>
</dd>
<dt class="hdlist1">inboxUpdate</dt>
<dd>
<p>The <code>inboxUpdate</code> contains the information relative to the messages to be included in the sending chain inbox.
Cross-chain messages are stored in the chain outbox on the sending chain and in the corresponding inbox on the receiving chain.
This property contains three elements:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the <code>crossChainMessages</code>:
An array of cross-chain messages.
The <code>crossChainMessages</code> property must contain consecutive messages from the outbox.</p>
</li>
<li>
<p><code>messageWitness</code>:
an inclusion witness into the outbox root:
In the sending chain, all cross-chain messages are added to a regular Merkle tree attested by the outbox root.
The <code>messageWitness</code> contains two values relative to that Merkle tree:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>the <code>partnerChainOutboxSize</code>, giving the total messages sent by the partner chain, and</p>
</li>
<li>
<p>the <code>siblingHashes</code>, which is part of a regular Merkle proof.
This Merkle proof is required if not all messages necessary to recompute the outbox root were given in <code>crossChainMessages</code>.
If all messages required to compute the outbox root are included in <code>crossChainMessages</code> then <code>siblingHashes</code> can be left empty.</p>
</li>
</ol>
</div>
</li>
<li>
<p><code>outboxRootWitness</code>:
An inclusion witness of this outbox root into the state root.
The outbox root of the sending chain is part of a sparse Merkle tree attested by the state root (provided in the certificate).
The <code>outboxRootWitness</code> property is an inclusion proof into the state root of the outbox root computed from the receiving chain inbox, <code>crossChainMessages</code> and <code>messageWitness</code>.
If the cross-chain update transaction contains an empty certificate, this property can also be left empty, as the required root was already attested in a previous cross-chain update.</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="sidechain-to-mainchain"><a class="anchor" href="#sidechain-to-mainchain"></a>2.1. Sidechain to mainchain</h3>
<div class="openblock float-group">
<div class="content">
<div class="paragraph">
<p><span class="image right"><img src="../../_images/understand-blockchain/interop/ccc-2.png" alt="ccc 2" width="300"></span></p>
</div>
<div class="paragraph">
<p>After the CCM has been created in step <a href="#using-cross-chain-transactions-to-generate-ccms">Using cross-chain transactions to generate CCMs</a>, it is added to the outbox of the sending chain X.</p>
</div>
<div class="paragraph">
<p>From the outbox, a <strong>relayer</strong> collects the CCMs and creates a CCU with the properties described in step <a href="#transferring-ccms-in-a-ccu">Transferring CCMs in a CCU</a>.</p>
</div>
<div class="paragraph">
<p>A relayer is a network participant who collects CCMs in a CCU and, as the name suggests, relays them to the mainchain.</p>
</div>
<div class="paragraph">
<p>When the relayer posts a CCU, the included CCMs will be added to the inbox of the mainchain, and processed further from there.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because all information to create CCUs is public, anyone can assume the role of a relayer in the network.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mainchain-to-sidechain"><a class="anchor" href="#mainchain-to-sidechain"></a>2.2. Mainchain to sidechain</h3>
<div class="openblock float-group">
<div class="content">
<div class="paragraph">
<p><span class="image right"><img src="../../_images/understand-blockchain/interop/ccc-3.png" alt="ccc 3" width="300"></span></p>
</div>
<div class="paragraph">
<p>After the CCM is included in the inbox of the mainchain, the mainchain performs the most important verifications on the CCM, e.g. it checks if the receiving chain exists, and has the status <code>active</code>.</p>
</div>
<div class="paragraph">
<p>If the verification on the mainchain is passed successfully, the CCM is added to the outbox of the mainchain, ready to be picked up by a relayer.</p>
</div>
<div class="paragraph">
<p>A relayer on the mainchain will include the CCM in a CCU and post it to the sending chain.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="executing-the-ccc-on-the-receiving-chain"><a class="anchor" href="#executing-the-ccc-on-the-receiving-chain"></a>3. Executing the CCC on the receiving chain</h2>
<div class="sectionbody">
<div class="openblock float-group">
<div class="content">
<div class="paragraph">
<p><span class="image right"><img src="../../_images/understand-blockchain/interop/ccc-4.png" alt="ccc 4" width="300"></span></p>
</div>
<div class="paragraph">
<p>Once the CCM is included in the inbox on the receiving chain Y, the remaining validations of the CCM are performed.</p>
</div>
<div class="paragraph">
<p>The <strong>Cross-chain commands</strong>, or <strong>CC-commands</strong>, induce a state transition in the receiving chain, if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the receiving application understands the particular command, i.e. if it includes the required module to interpret the command name</p>
</li>
<li>
<p>the CCM includes all parameters required for the CC-command</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the validation is completed successfully, the CC-Transfer command is performing the intended state changes on the receiving chain, i.e. adding 5 LSK to Bobs account.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="complete-cross-chain-communication-flow"><a class="anchor" href="#complete-cross-chain-communication-flow"></a>Complete cross-chain-communication flow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To summarize, the complete flow of cross-chain communciation is described in the diagram below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/understand-blockchain/interop/cc-cmmunication-flow.png" alt="cc cmmunication flow" width="300">
</div>
<div class="title">Figure 1. Overview: Cross-chain communication flow</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="error-handling"><a class="anchor" href="#error-handling"></a>Error handling</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ccm-validation-in-the-mainchain"><a class="anchor" href="#ccm-validation-in-the-mainchain"></a>CCM validation in the Mainchain</h3>
<div class="paragraph">
<p><span class="image "><img src="../../_images/understand-blockchain/interop/ccc-2b.png" alt="ccc 2b" width="300"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="ccm-validation-in-the-receiving-chain"><a class="anchor" href="#ccm-validation-in-the-receiving-chain"></a>CCM validation in the receiving chain</h3>
<div class="paragraph">
<p><span class="image "><img src="../../_images/understand-blockchain/interop/ccc-3b.png" alt="ccc 3b" width="300"></span></p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">Lisk Interoperability</a></span>
  <span class="next"><a href="../sdk/index.html">Introduction to the Lisk SDK</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>© 2022 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
        <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
        <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
        <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
  <!--    </div> -->
    </div>
  </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../_/js/vendor/component-versions.js"></script>
<script src="../../_/js/vendor/custom.js"></script>
  <script src="../../_/js/vendor/docsearch.js"></script>
  <!--<script src="../../_/js/vendor/docsearch.min.js"></script>-->
  <!--<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>-->
  <script>
    docsearch({
      container: '#docsearch',
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search'
    });
    docsearch({
      container: '#docsearch-toolbar',
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search'
    });
  </script>
  <!--<script>
    function focusSearchInput () { document.querySelector('#search-input').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInput()
    window.addEventListener('load', focusSearchInput)
  </script>-->
<!--  <script>
    function focusSearchInputToolbar () { document.querySelector('#search-input-toolbar').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input-toolbar',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInputToolbar()
    window.addEventListener('load', focusSearchInputToolbar)
  </script>-->
  </body>
</html>
